Κ24: Προγραμματισμός Συστήματος - 2η Εργασία, Εαρινό Εξάμηνο 2022

Άρης Χαραλάμπης: sdi1600192

Compilation: 
	Υπάρχει make file που κάνει compile το ζητούμενα της εργασίας με την εντολή make all
	και clean με την make clean

Ο server  καλείται από τη γραμμή εντολών ως εξής:
./dataServer -p <port> -s <thread_pool_size> -q <queue_size> -b <block_size>

Ο πελάτης καλείται από τη γραμμή εντολών ως εξής:
./remoteClient -i <server_ip> -p <server_port> -d <directory>
	
-Για τον κώδικα σχετικά με τα sockets και τα threads βασίστικα στο κώδικα που υπάρχει στις διαφάνιες
το ίδιο και με την χρήση των mutexes για την προστασία της ουράς (consumer-producer).

-Για το μέγιστο listen έχω βάλει 100.

-Όπως και στην εκφώνηση ο server δέχεται το input και φτιάχνει αντίστοιχα όσους worker είναι το pool που του δίνουμε
Ο server θα τρέχει 24/7 μέχρι να το τερματίσουμε χειροκίνητα
Για ενα worker το προγραμμα λειτουργει καλά, ωστόσο για περισσότερους ορισμένες φορές λειτουργεί και άλλες κάνει seg fault ή deadlock
δεν πρόλαβα να το βρώ

-Έχουμε ένα communication thread για κάθε client και όταν τον φτίαχνουμε ορίζουμε και ενα mutex που το αποθηκεύουμε 
σε ένα map μαζί με το socket του client. 

-Αυτό το κάνουμε γιατί όταν ένας worker θα θέλει να στείλει τα δεδομένα ενός αρχείου στο client θα πρέπει να είναι
ο μόνος που θα έχει πρόσβαση.

-Επιπλέον έχω ένα mutex για την πρόσβαση στην ουρά την οποία κάνει lock το communication thread όταν εισάγει στην ουρά
 και ο worker όταν βγάζει
 
-Υπάρχει και ένα mutex για οταν θέλουμε να εκτυπώσουμε κάτι.
-Η ουρά, το map και τα mutexes είναι global

-Για τον τρόπο επικοινωνίας και τι μηνύματα ανταλλάσουν server client υπάρχουν σχόλια στον κώδικα

-Για την αποστολή του αρχείου γεμίζω ένα buffer με μεγεθος το αρχείο που δίαβασε
και μέτα το στέλνω ανα block size στο client μέχρι να σταλεί όλο
επειδή όμως δεν στέλνει πάντα blocksize διαβαζουμε το πραγματικό μεγεθος που εστειλε

-Αντίστοιχα από την μερία του client οτι λαμβάνουμε

-To αρχείο προς αντιγραφή πρέπει να είναι στο ιδιο directory με το executable του server
-O client φτιάχνει ένα folder ./Client και τοποθετεί εκεί τα αντίγραφά του.

